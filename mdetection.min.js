/**
 * Mobile Detection
 * Re-write in purely JavaScript to accept hashed URL as redirect URL
 * Usage:
 *    new MDetection().exec(); // Redirect to `m/` folder
 *
 * @version  2.0
 * @author  Anthony S. Wu <anthonyspwu@gmail.com>
 */
var MDetection=function(){"use strict";function a(a,b){this.redirectURL=a||"m",this.expireInDays=b||14,this.redirectFlag=!1}return a.prototype.exec=function(){window.location.href.indexOf("nomobile=true")>=0?(this.redirectFlag=!1,this.setCookie("redflag",!1,this.expireInDays)):window.location.href.indexOf("nomobile=false")>=0?(this.redirectFlag=!0,this.setCookie("redflag",!0,this.expireInDays)):void 0!==this.getCookie("redflag")?(this.redirectFlag=this.getCookie("redflag"),"string"==typeof this.redirectFlag&&(this.redirectFlag="true"==this.redirectFlag?!0:!1)):(this.redirectFlag=!0,this.setCookie("redflag",!0,this.expireInDays)),this.redirectFlag&&(null===navigator.userAgent.match("ipad")&&(navigator.appVersion.indexOf("android")>=0||null!==navigator.userAgent.match("iphone")||navigator.appVersion.indexOf("nokia")>=0||null!==navigator.userAgent.match("ipod"))?void 0===this.redirectURL||""===this.redirectURL?document.location.replace("m/"):document.location.replace(this.redirectURL):null===navigator.userAgent.match("ipad")&&screen.width<=800&&(void 0===this.redirectURL||""===this.redirectURL?document.location.replace("m/"):document.location.replace(this.redirectURL)))},a.prototype.getCookie=function(a){var b,c,d,e,f=document.cookie.split(";");for(b=0,e=f.length;e>b;b++)if(c=f[b].substr(0,f[b].indexOf("=")),d=f[b].substr(f[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return unescape(d)},a.prototype.setCookie=function(a,b,c){var d=new Date;d.setDate(d.getDate()+c);var e=escape(b)+(null===c?"":"; expires="+d.toUTCString());document.cookie=a+"="+e},a}();